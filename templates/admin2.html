<html><head><base href="https://kenyanp2plearning.com/admin/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KenyaLearn: Enhanced Admin Dashboard</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f0f0f0;
    color: #333;
  }
  .container {
    display: flex;
    min-height: 100vh;
  }
  .sidebar {
    width: 250px;
    background-color: #2c3e50;
    color: white;
    padding: 20px;
  }
  .main-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
  }
  .admin-info {
    margin-bottom: 20px;
  }
  .sign-out {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 10px 15px;
    cursor: pointer;
    border-radius: 5px;
  }
  h1, h2 {
    color: #2c3e50;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
  }
  th {
    background-color: #3498db;
    color: white;
  }
  tr:nth-child(even) {
    background-color: #f2f2f2;
  }
  .action-btn {
    padding: 5px 10px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    margin-right: 5px;
  }
  .ban-btn {
    background-color: #e74c3c;
    color: white;
  }
  .review-btn {
    background-color: #f39c12;
    color: white;
  }
  .add-btn {
    background-color: #2ecc71;
    color: white;
    padding: 10px 15px;
    font-size: 16px;
    margin-top: 20px;
  }
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
  }
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }
  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
  form {
    display: flex;
    flex-direction: column;
  }
  form input, form select {
    margin-bottom: 10px;
    padding: 5px;
  }
  .star-rating {
    color: #f39c12;
    font-size: 1.2em;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <div class="admin-info">
        <h2>Admin Dashboard</h2>
        <p>Name: <span id="adminName">John Admin</span></p>
        <p>ID: <span id="adminId">ADM001</span></p>
        <button class="sign-out" onclick="signOut()">Sign Out</button>
      </div>
    </div>
    <div class="main-content">
      <h1>KenyaLearn Platform Management</h1>
      
      <h2>Members List</h2>
      <table id="membersTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Wallet Balance</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="membersTableBody">
          <!-- Member rows will be dynamically added here -->
        </tbody>
      </table>
      <button class="action-btn add-btn" onclick="showAddMemberModal()">Add New Member</button>

      <h2>Tutors List</h2>
      <table id="tutorsTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Subject</th>
            <th>Wallet Balance</th>
            <th>Average Rating</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="tutorsTableBody">
          <!-- Tutor rows will be dynamically added here -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Add Member Modal -->
  <div id="addMemberModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('addMemberModal')">&times;</span>
      <h2>Add New Member</h2>
      <form id="addMemberForm">
        <input type="text" id="newMemberName" placeholder="Name" required>
        <input type="email" id="newMemberEmail" placeholder="Email" required>
        <select id="newMemberType">
          <option value="learner">Learner</option>
          <option value="tutor">Tutor</option>
        </select>
        <input type="text" id="newMemberSubject" placeholder="Subject (for tutors)" style="display:none;">
        <button type="submit" class="action-btn add-btn">Add Member</button>
      </form>
    </div>
  </div>

  <!-- Tutor Reviews Modal -->
  <div id="tutorReviewsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('tutorReviewsModal')">&times;</span>
      <h2>Tutor Reviews</h2>
      <div id="tutorReviewsContent"></div>
    </div>
  </div>

  <script>
    // Sample data
    let members = [
      { name: "Alice Smith", email: "alice@example.com", walletBalance: 500 },
      { name: "Bob Johnson", email: "bob@example.com", walletBalance: 750 },
    ];

    let tutors = [
      { name: "Carol Williams", subject: "Mathematics", walletBalance: 1000, averageRating: 4.5, reviews: [
        { student: "Alice Smith", rating: 5, comment: "Excellent tutor!" },
        { student: "Bob Johnson", rating: 4, comment: "Very helpful." }
      ]},
      { name: "David Brown", subject: "Physics", walletBalance: 1200, averageRating: 4.2, reviews: [
        { student: "Eve Davis", rating: 4, comment: "Good explanations." },
        { student: "Frank Wilson", rating: 5, comment: "Helped me improve a lot." }
      ]},
    ];

    function populateTable(tableId, data, isTutor = false) {
      const tableBody = document.getElementById(tableId);
      tableBody.innerHTML = '';
      data.forEach(item => {
        const row = tableBody.insertRow();
        row.insertCell(0).textContent = item.name;
        row.insertCell(1).textContent = isTutor ? item.subject : item.email;
        row.insertCell(2).textContent = `KES ${item.walletBalance}`;
        if (isTutor) {
          const ratingCell = row.insertCell(3);
          ratingCell.innerHTML = `<span class="star-rating">${'★'.repeat(Math.round(item.averageRating))}${'☆'.repeat(5 - Math.round(item.averageRating))}</span> (${item.averageRating.toFixed(1)})`;
        }
        const actionCell = row.insertCell(isTutor ? 4 : 3);
        const banButton = document.createElement('button');
        banButton.textContent = 'Ban';
        banButton.className = 'action-btn ban-btn';
        banButton.onclick = () => banUser(item.name, isTutor);
        actionCell.appendChild(banButton);
        if (isTutor) {
          const reviewButton = document.createElement('button');
          reviewButton.textContent = 'Reviews';
          reviewButton.className = 'action-btn review-btn';
          reviewButton.onclick = () => showTutorReviews(item);
          actionCell.appendChild(reviewButton);
        }
      });
    }

    function banUser(name, isTutor) {
      if (confirm(`Are you sure you want to ban ${name}?`)) {
        if (isTutor) {
          tutors = tutors.filter(tutor => tutor.name !== name);
          populateTable('tutorsTableBody', tutors, true);
        } else {
          members = members.filter(member => member.name !== name);
          populateTable('membersTableBody', members);
        }
        alert(`${name} has been banned.`);
      }
    }

    function signOut() {
      if (confirm("Are you sure you want to sign out?")) {
        alert("You have been signed out.");
        // Redirect to login page or perform other necessary actions
      }
    }

    function showAddMemberModal() {
      document.getElementById('addMemberModal').style.display = 'block';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    function showTutorReviews(tutor) {
      const modal = document.getElementById('tutorReviewsModal');
      const content = document.getElementById('tutorReviewsContent');
      content.innerHTML = `
        <h3>${tutor.name} - ${tutor.subject}</h3>
        <p>Average Rating: <span class="star-rating">${'★'.repeat(Math.round(tutor.averageRating))}${'☆'.repeat(5 - Math.round(tutor.averageRating))}</span> (${tutor.averageRating.toFixed(1)})</p>
        <h4>Reviews:</h4>
        <ul>
          ${tutor.reviews.map(review => `
            <li>
              <p><strong>${review.student}</strong> - <span class="star-rating">${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}</span></p>
              <p>${review.comment}</p>
            </li>
          `).join('')}
        </ul>
      `;
      modal.style.display = 'block';
    }

    document.getElementById('newMemberType').addEventListener('change', function() {
      const subjectField = document.getElementById('newMemberSubject');
      subjectField.style.display = this.value === 'tutor' ? 'block' : 'none';
    });

    document.getElementById('addMemberForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('newMemberName').value;
      const email = document.getElementById('newMemberEmail').value;
      const type = document.getElementById('newMemberType').value;
      const subject = document.getElementById('newMemberSubject').value;

      if (type === 'tutor') {
        tutors.push({ name, subject, walletBalance: 0, averageRating: 0, reviews: [] });
        populateTable('tutorsTableBody', tutors, true);
      } else {
        members.push({ name, email, walletBalance: 0 });
        populateTable('membersTableBody', members);
      }

      closeModal('addMemberModal');
      this.reset();
      alert('New member added successfully!');
    });

    // Initial population of tables
    populateTable('membersTableBody', members);
    populateTable('tutorsTableBody', tutors, true);

    // Close modal when clicking outside of it
    window.onclick = function(event) {
      if (event.target.className === 'modal') {
        event.target.style.display = 'none';
      }
    }
  </script>
</body></html>